# Terraform S3 Bucket Template

This Terraform template creates an AWS S3 bucket with security best practices and configurable options.

## Features

- S3 bucket with customizable name
- Server-side encryption (AES256)
- Versioning support (configurable)
- Public access blocking (configurable)
- Tagging support
- Input validation for bucket names

## Prerequisites

- Terraform >= 1.0
- AWS CLI configured with appropriate credentials
- AWS provider ~> 5.0

## Usage

### 1. Clone and Setup

```bash
# Copy the example variables file
cp terraform.tfvars.example terraform.tfvars

# Edit the variables file with your values
nano terraform.tfvars
```

### 2. Initialize Terraform

```bash
terraform init
```

### 3. Plan the Deployment

```bash
terraform plan
```

### 4. Apply the Configuration

```bash
terraform apply
```

### 5. Destroy Resources (when needed)

```bash
terraform destroy
```

## Configuration

### Required Variables

- `bucket_name`: Name of the S3 bucket (must be globally unique)

### Optional Variables

- `aws_region`: AWS region (default: "us-east-1")
- `versioning_enabled`: Enable bucket versioning (default: true)
- `block_public_access`: Block public access (default: true)
- `tags`: Resource tags (default: basic tags)

## Examples

### Basic Usage

```hcl
bucket_name = "my-app-storage-bucket-2024"
```

### Production Configuration

```hcl
aws_region           = "us-west-2"
bucket_name          = "prod-app-data-bucket-xyz"
versioning_enabled   = true
block_public_access  = true

tags = {
  Environment = "production"
  Application = "web-app"
  Team        = "backend"
  CostCenter  = "engineering"
}
```

### Development Configuration

```hcl
aws_region           = "us-east-1"
bucket_name          = "dev-testing-bucket-123"
versioning_enabled   = false
block_public_access  = true

tags = {
  Environment = "development"
  Purpose     = "testing"
  AutoDelete  = "true"
}
```

## Outputs

After successful deployment, the following outputs will be available:

- `bucket_id`: The S3 bucket ID
- `bucket_arn`: The S3 bucket ARN
- `bucket_domain_name`: The bucket domain name
- `bucket_regional_domain_name`: The bucket regional domain name

## Security Features

- **Encryption**: Server-side encryption enabled by default
- **Public Access**: Blocked by default for security
- **Versioning**: Enabled by default to protect against accidental deletions
- **Validation**: Bucket name validation to ensure compliance with AWS naming rules

## Best Practices

1. Always use unique bucket names
2. Enable versioning for production buckets
3. Keep public access blocked unless specifically needed
4. Use meaningful tags for resource management
5. Regularly review and rotate access credentials

## Troubleshooting

### Common Issues

1. **Bucket name already exists**: S3 bucket names must be globally unique
2. **Permission denied**: Ensure your AWS credentials have S3 permissions
3. **Invalid bucket name**: Check bucket naming conventions

### Useful Commands

```bash
# Check Terraform version
terraform version

# Validate configuration
terraform validate

# Format code
terraform fmt

# Show current state
terraform show

# List resources
terraform state list
```
This code was generated by [Firefly](https://app.gofirefly.io)